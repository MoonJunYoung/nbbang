# 사용자 서비스
## 아이디를 사용하여 회원가입, 로그인하기
### 비즈니스 로직
#### 회원가입
엔빵 서비스는 개인서비스 이므로 사용자는 회원가입을 해야합니다.
회원가입 서비스는 아이디, 비밀번호, 이름이 필요합니다.
아이디는 중복사용이 불가합니다.
비밀번호는 안전하게 단방향 암호화해서 저장합니다.
#### 로그인
서비스를 사용하기전 사용자를 인식하기 위해 로그인을 해야합니다.
로그인 서비스는 아이디, 비밀번호가 필요합니다.
로그인 결과는 실패, 성공 으로만 응답합니다.

### 서비스로직
#### 회원가입
1. 클라이언트는 Method POST  https://nbbang.shop/api/user/sign-up 로 BodyData(identifier:아이디, password:비밀번호, name:이름)를 포함해 요청합니다.
2. 아이디가 중복되었는지 데이터베이스를 조회합니다.
    - 중복되었다면 이미 아이디가 사용중이라는 안내를 클라이언트에게 응답합니다.
3. 비밀번호를 단방향 암호화를 합니다.
4. 데이터 베이스에 정보를 저장합니다.
5. 저장된 데이터의 유저고유값 (Auto Increment로 생성된 PK)를 사용하여 JWT 토큰을 생성합니다.
6. JWT 토큰을 클라이언트에게 응답합니다.

#### 로그인
1. 클라이언트는 Method POST  https://nbbang.shop/api/user/sign-in 로 BodyData(identifier:아이디, password:비밀번호)를 포함해 요청합니다.
2. 아이디를 사용해 데이터베이스에서 사용자의 정보를 로드합니다.
    - 로드된 사용자의 정보가 없다면 아이디 또는 비밀번호를 확인해달라는 안내를 클라이언트에게 응답합니다.
3. 입력된 비밀번호를 암호화하여 로드한 사용자의 정보의 암호화된 비밀번호와 일치하는지 확인합니다.
    - 일치하지 않으면 아이디 또는 비밀번호를 확인해달라는 안내를 클라이언트에게 응답합니다.
4. 로드한 사용자의 정보의 유저고유값 를 사용하여 JWT 토큰을 생성합니다.
5. JWT 토큰을 클라이언트에게 응답합니다.


## Oauth 를 사용하여 시작하기
### 비즈니스 로직
사용자는 Google, Kakao, Naver 소셜플랫폼의 계정을 사용해 엔빵의 개인서비스를 이용할 수 있습니다.
쇼셜플랫폼 제공받는 정보는 각 플랫폼의 회원 ID, 이름을 제공받습니다.

### 서비스로직
1. 클라이언트는 Method POST  https://nbbang.shop/api/user/{platform}-login 로 BodyData(token:Oauth인가코드)를 포함해 요청합니다.
2. 인가코드를 사용해 사용자의 접근토큰을 발급빋습니다.
3. 접근토큰을 사용하여 사용자의 정보(회원ID, 이름)를 제공받습니다.
4. 플랫폼의 회원ID를 사용하여 데이터베이스에서 회원정보를 로드합니다.
    로드할 정보가 없으면 해당 회원 정보를 저장합니다.
5. 로드한 사용자의 정보의 유저고유값 를 사용하여 JWT 토큰을 생성합니다.
6. JWT 토큰을 클라이언트에게 응답합니다.
